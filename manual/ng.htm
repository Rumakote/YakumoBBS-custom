<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>規制設定/規制ログ閲覧編集@Yakumo BBS Script</title>
</head>

<body>

<h1 align="center">Yakumo BBS Script</h1>
<div align="center">
  <center>
  <table border="1" width="830" cellspacing="0">
    <tr>
      <td width="229" bgcolor="#C0C0F0" valign="top">
      </center>
      <p style="margin-left: 5pt; margin-right: 5pt">
      <b><br>
      </b>
      <a href="index.htm">概要</a>
          <p style="MARGIN-LEFT: 5pt; MARGIN-RIGHT: 5pt"><a href="version.htm">更新履歴</a>
      <p style="margin-left: 5pt; margin-right: 5pt">
      <a href="http://www.vector.co.jp/soft/unix/net/se494658.html" target="_blank">ダウンロード</a>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="server.htm">サーバーについて</a></p>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="install.htm">インストール方法</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="init1.htm">初期設定</a><b><br>
      　</b><a href="init1.htm#1">パーミッション設定</a><br>
      　<a href="init1.htm#2">スクリプト初期化</a><br>
      　<a href="init1.htm#3">文字コード設定</a><br>
      　<a href="init2.htm">掲示板設定</a><br>
      　<a href="init3.htm">ボード初期設定</a><br>
      　<a href="init3.htm#2">ローカルルール初期設定</a><br>
      　<a href="init3.htm#3">終了レス初期設定</a><br>
      　<a href="init3.htm#4">バナー初期設定</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="category.htm">カテゴリ設定</a><br>
      　<a href="category.htm#1">カテゴリ名称登録</a><br>
      　<a href="category.htm#2">未登録ボード一覧</a><br>
      　<a href="category.htm#3">ボード編集</a><br>
      　<a href="category.htm#4">カテゴリ名称変更</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="board.htm#1">ボード作成</a><br>
      <a href="board.htm#2">ボード削除</a><br>
      <a href="board.htm#3">ボードを見る</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="picture.htm#1">画像アップロード</a><br>
      <a href="picture.htm#2">画像ファイル削除</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="setting.htm">ボード設定変更</a><br>
      <a href="rule.htm#1">
      ローカルルール編集</a><br>
      <a href="rule.htm#2">
      バナー編集</a><br>
      <a href="rule.htm#3">index.html更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt">
      <a href="edit.htm#1">
      終了レス編集</a><br>
      <a href="edit.htm#2">
      携帯版名無し編集</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="ng.htm#1">規制設定</a><br>
      <a href="ng.htm#2">
      規制ログ閲覧編集</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="cap.htm#1">キャップ設定</a><br>
      <a href="cap.htm#2">
      規制外トリップ設定</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="top_page.htm#1">トップページ編集</a><br>
      　<a href="top_page.htm#2">掲示板タイトル編集</a><br>
      　<a href="top_page.htm#3">トップページ更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="top_page.htm#4">専ブラ設定</a><br>
      　<a href="top_page.htm#5">掲示板タイトル編集</a><br>
      　<a href="top_page.htm#6">BBS_KEY編集</a><br>
      　<a href="top_page.htm#7">専ブラ設定更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="delete.htm#1">レス削除</a><br>
      <a href="delete.htm#2">
      レス復活</a><br>
      <a href="delete.htm#3">
      投稿画像削除</a><br>
      <a href="delete.htm#4">
      レス透明削除</a><br>
      <a href="thread1.htm#1">
      スレッド停止</a><br>
      <a href="thread1.htm#2">
      管理者投稿</a><br>
      <a href="thread1.htm#3">
      スレッド再開</a><br>
      <a href="thread1.htm#4">
      スレタイ変更</a><br>
      <a href="thread2.htm#1">
      スレッド消去</a><br>
      <a href="thread2.htm#2">
      ボード間移動</a><br>
      <a href="thread2.htm#3">
      過去ログ倉庫移動</a><br>
      <a href="thread2.htm#4">
      索引再構築</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="dat.htm#1">datアップロード</a><br>
      <a href="dat.htm#2">
      掲示板再構築</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="maintenance.htm#1">メンテナンス告知</a><br>
      　<a href="maintenance.htm#2">メンテナンス告知編集</a><br>
      　<a href="maintenance.htm#3">メンテナンス告知実行</a><br>
      　<a href="maintenance.htm#4">メンテナンス告知解除</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="admin_owner.htm">管理者設定（オーナー）</a><br>
      <a href="admin_master.htm">
      管理者設定（マスター）</a><br>
      <a href="admin_category.htm">
      管理者設定（カテゴリ）</a><br>
      <a href="admin_board.htm">
      管理者設定（ボード）</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="http://yakumotatu.com/bbs/freewear/">サポート掲示板</a>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="http://yakumotatu.com/">サイトトップ</a>      
    </td>
      <td width="605" valign="top">
        <h3 style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a name="1"></a>規制設定</h3>
        <p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　規制の設定はサーバー全体でもボード単位でもできます。<br>
        　サーバー全体の規制を設定をしたい場合はメインメニュー下段の「規制設定」を選択して実行ボタンをクリックします。<br>
        　ボード固有の規制を設定したい場合は設定したいボードをメインメニュー左側で選択し、上段の「規制設定」を選択して実行ボタンをクリックします。<br>
        　設定の仕方はどちらも同じです。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt" align="center"><img border="0" src="images/ngsetting.gif" width="500" height="492"><p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　規制できる内容は図のように３つです。IPアドレスと携帯の契約者IDは同じ場所に記述します。<br>
        　これらの規制すべき内容は責任者権限を持った管理者のみ「レス削除」「レス復活」「レス透明削除」で確認できます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>・規制するホスト名</b><br>
        　規制するリモートホストの文字列を記述します。複数設定したい場合は改行します。<br>
        　ここに記述した内容が投稿者のリモートホストの文字列に含まれていれば規制により投稿できなくなります。<br>
        　また、リモートホストを返さないサーバーからの投稿はnoname_hostと記述する事で規制の対象になります。スパム投稿の多くはリモートホストを返さないのでサーバー全体での規制にnoname_hostを記述しておくと、かなりのスパムが弾けます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>・規制するIPアドレスまたは携帯ID</b><br>
        　IPアドレスで規制する場合には、ここでIPアドレスを１６進数にした物を記述します。「レス削除」などでは「IPADR=7f000001=127.0.0.1」というように、１６進数と１０進数の両方が表示されますので計算する必要はありません。アク禁にする時は１６進数で記述し、プロバイダ等に通報する時は１０進数で連絡します。<br>
        　またIPアドレスの比較は１６進数の先頭から始め、記述した内容と一致すれば規制の対象となります。なので全桁指定する必要は有りません。最初は全桁を指定し、効果が薄い場合は６桁に減らします。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　携帯の契約者IDで規制したい場合もここに記述します。「レス削除」等の画面で「ID=ccxxxxxxx」などと表示される物を設定します。ccの部分にはキャリアを現す２文字が入ります。こちらも比較は先頭から行いますが、全桁記述しないと途中までIDが同じ別人も規制してしまう可能性が有ります。<br>
        　携帯のIDを非通知にしている場合はIDにnon_id_xxと入ります。xxの部分には携帯のキャリアを現す２文字が入ります。AUの携帯でIDを非通知にしている場合はnon_id_auとなります。ID非通知をキャリアごとに規制できます。また先頭から比較していますから、non_idと記述すれば非通知全キャリアを規制できます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　このIDには携帯からの投稿は上記の通り契約者IDが入るのですが、パソコンからの投稿では次のようになります。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　pc&nbsp;           
        （一般的な投稿）<br>
        　pcxに続けてIPアドレス　（IPアドレスがリモートホストから取得した物と異なる）<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　pcxに続くIPアドレスはリモートホストから取得した物です。リモートホストからIPアドレスを返さないサーバーでは、pcx0.0.0.0になります。スパム投稿に多いパターンですが、稀に普通の投稿も有りますので、規制するかどうかは判断のむずかしい所です。スパムは一度成功させるとしつこく投稿して来ます。別の規制に引っ掛けるとしても投稿が続く限りサーバーに負荷を掛ける事になります。スパムの投稿を許さない為にpcx0.0.0.0は規制し、まともな投稿をしようとして引っ掛かる人はサーバーの管理者に苦情を言ってもらうのが良いのかもしれません。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>・ＮＧワード設定</b><br>
        　余り説明の必要は無いと思います。投稿禁止の文字列を記述して改行します。こちらは投稿本文に設定した文字列が含まれていた場合は投稿を弾きます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">図の例はＮＧワード以外は作者が実際に運営している掲示板の設定です。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b><a name="2"></a>規制ログ閲覧編集</b><p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　規制がサーバー単位とボード単位で出来る為に規制に掛かったログもボードとサーバー全体と別々に閲覧できます。書式はどちらも同じなので一緒に解説します。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt" align="center"><img border="0" src="images/nglog.gif" width="500" height="558"><p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">１行目：名前欄（メール欄）投稿日時  
        投稿ボードディレクトリ スレ立て投稿ならスレタイ<br> 
        　　　　　datファイルの番号 投稿用ボタンの文字  
        規制にヒットした文字列<br>
        ２行目：規制の記述されたファイル名<br>
        ３行目：ID IPアドレス<br> 
        ４行目：リモートホスト（サーバー名）<br>
        ５行目：リファラー（投稿用ボタンを押したページのurl）<br>
        ６行目：ユーザーエージェント（ブラウザ情報等）<br>
        ７行目〜：投稿本文＋最後に改行<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　ログをいつまでもサーバーに保管しておくのはスペースの無駄になります。ある程度の量になったらメモ帳などのテキストエディタにコピーしてから削除すると良いでしょう。何件か削除したら実行ボタンをクリックします。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　ちなみに図の例は作者が運営する掲示板の実物です。最近は普通の投稿よりスパム投稿の方が多いですが、大部分を規制で弾いています。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><a href="cap.htm">キャップ設定/規制外トリップ設定</a>  
    </td>
  </tr>
  </table>
</div>

</body>

</html>
