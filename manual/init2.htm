<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>掲示板設定@Yakumo BBS Script</title>
</head>

<body>

<h1 align="center">Yakumo BBS Script</h1>
<div align="center">
  <center>
  <table border="1" width="830" cellspacing="0">
    <tr>
      <td width="229" bgcolor="#C0C0F0" valign="top">
      </center>
      <p style="margin-left: 5pt; margin-right: 5pt">
      <b><br>
      </b>
      <a href="index.htm">概要</a>
          <p style="MARGIN-LEFT: 5pt; MARGIN-RIGHT: 5pt"><a href="version.htm">更新履歴</a>
      <p style="margin-left: 5pt; margin-right: 5pt">
      <a href="http://www.vector.co.jp/soft/unix/net/se494658.html" target="_blank">ダウンロード</a>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="server.htm">サーバーについて</a></p>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="install.htm">インストール方法</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="init1.htm">初期設定</a><b><br>
      　</b><a href="init1.htm#1">パーミッション設定</a><br>
      　<a href="init1.htm#2">スクリプト初期化</a><br>
      　<a href="init1.htm#3">文字コード設定</a><br>
      　<a href="init2.htm">掲示板設定</a><br>
      　<a href="init3.htm">ボード初期設定</a><br>
      　<a href="init3.htm#2">ローカルルール初期設定</a><br>
      　<a href="init3.htm#3">終了レス初期設定</a><br>
      　<a href="init3.htm#4">バナー初期設定</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="category.htm">カテゴリ設定</a><br>
      　<a href="category.htm#1">カテゴリ名称登録</a><br>
      　<a href="category.htm#2">未登録ボード一覧</a><br>
      　<a href="category.htm#3">ボード編集</a><br>
      　<a href="category.htm#4">カテゴリ名称変更</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="board.htm#1">ボード作成</a><br>
      <a href="board.htm#2">ボード削除</a><br>
      <a href="board.htm#3">ボードを見る</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="picture.htm#1">画像アップロード</a><br>
      <a href="picture.htm#2">画像ファイル削除</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="setting.htm">ボード設定変更</a><br>
      <a href="rule.htm#1">
      ローカルルール編集</a><br>
      <a href="rule.htm#2">
      バナー編集</a><br>
      <a href="rule.htm#3">index.html更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt">
      <a href="edit.htm#1">
      終了レス編集</a><br>
      <a href="edit.htm#2">
      携帯版名無し編集</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="ng.htm#1">規制設定</a><br>
      <a href="ng.htm#2">
      規制ログ閲覧編集</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="cap.htm#1">キャップ設定</a><br>
      <a href="cap.htm#2">
      規制外トリップ設定</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="top_page.htm#1">トップページ編集</a><br>
      　<a href="top_page.htm#2">掲示板タイトル編集</a><br>
      　<a href="top_page.htm#3">トップページ更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="top_page.htm#4">専ブラ設定</a><br>
      　<a href="top_page.htm#5">掲示板タイトル編集</a><br>
      　<a href="top_page.htm#6">BBS_KEY編集</a><br>
      　<a href="top_page.htm#7">専ブラ設定更新</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="delete.htm#1">レス削除</a><br>
      <a href="delete.htm#2">
      レス復活</a><br>
      <a href="delete.htm#3">
      投稿画像削除</a><br>
      <a href="delete.htm#4">
      レス透明削除</a><br>
      <a href="thread1.htm#1">
      スレッド停止</a><br>
      <a href="thread1.htm#2">
      管理者投稿</a><br>
      <a href="thread1.htm#3">
      スレッド再開</a><br>
      <a href="thread1.htm#4">
      スレタイ変更</a><br>
      <a href="thread2.htm#1">
      スレッド消去</a><br>
      <a href="thread2.htm#2">
      ボード間移動</a><br>
      <a href="thread2.htm#3">
      過去ログ倉庫移動</a><br>
      <a href="thread2.htm#4">
      索引再構築</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="dat.htm#1">datアップロード</a><br>
      <a href="dat.htm#2">
      掲示板再構築</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="maintenance.htm#1">メンテナンス告知</a><br>
      　<a href="maintenance.htm#2">メンテナンス告知編集</a><br>
      　<a href="maintenance.htm#3">メンテナンス告知実行</a><br>
      　<a href="maintenance.htm#4">メンテナンス告知解除</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="admin_owner.htm">管理者設定（オーナー）</a><br>
      <a href="admin_master.htm">
      管理者設定（マスター）</a><br>
      <a href="admin_category.htm">
      管理者設定（カテゴリ）</a><br>
      <a href="admin_board.htm">
      管理者設定（ボード）</a></p>
      <p style="line-height: 150%; margin-left: 5pt; margin-right: 5pt"><a href="http://yakumotatu.com/bbs/freewear/">サポート掲示板</a>
      <p style="margin-left: 5pt; margin-right: 5pt"><a href="http://yakumotatu.com/">サイトトップ</a>      
    </td>
      <td width="605">
        <h3 style="line-height: 150%; margin-left: 5pt; margin-right: 5pt">初期設定</h3>
        <p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt" align="center"><img border="0" src="images/init_bbs.gif" width="490" height="413"><p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　スクリプトの初期化やパーミッションの設定ができたら、掲示板設定をします。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>掲示板トップのアドレス</b><br>
        　これはトップへのリンクをクリックした場合の行き先になります。ボード１枚で運用する場合、複数ボード、複数サーバーで運用する場合で設定内容が変わります。<br>
        　ボード１枚のみで運用し、メインのサイトは別に有る場合はそのurlを記述します。<br>
        　ボードが１枚でも複数でも、１つのサーバーで運用し、掲示板としてのトップページを作る場合はデフォルトのまま変更しません。<br>
        　複数サーバーで運用する場合は、掲示板全体のトップページを作るサーバーのurlにします。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>スレッドのレス数上限</b><br>
        　１つのスレッドのレス数を設定します。２ちゃんねると同じで運用するなら1000を指定します。設定はサーバー単位になりボード個別では指定できません。<br>
        　余り大きな数値に設定すると、書き込み量が多いスレッドではサーバーを重くする可能性が有りますので、1000〜2000程度が適切と思われます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>スレッドサイズの上限</b><br>
        　文字としてのログ(datファイル)サイズの上限を設定します。長文の多いスレッドでは想定外のサイズの書き込みが有るかもしれません。サーバーへの負荷の大きさはレス数よりスレッドのサイズが大きく影響します。レス数上限で設定したレス数にならなくても、ログのサイズがこの値より大きくなるとスレッドの書き込みを終了させます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>板のスレッド数上限</b><br>
        　１つのボードに作成できるスレッド数の最大値を記述します。サーバーの容量などを考えて設定して下さい。0またはマイナスの数値にすると無制限になり、過去ログ倉庫への移動やスレッドの削除は管理人が適当に「過去ログ倉庫移動」や「スレッド消去」等のコマンドを使って任意に実行する事になります。<br>
        　現バージョンではスレッド数の上限を超えたら、スレッドタイトル一覧の中で１番下に有るスレッドを過去ログ倉庫へ移動する仕様になっています。先々ではcronを使ったもっと高度なdat落ち処理を実現できないものかと検討しています。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　参考までにスレッドのレス数上限が1000として、１つの長めの投稿に対する短いレスが付くタイプのスレッドなら大体１スレッド300KB前後、長文メインのスレッドなら500KBを超える場合が有ります。投稿者の端末情報や管理情報を含めると画像投稿無しで１スレッド1MBくらいサーバースペースを消費すると思って下さい。画像メインのスレッドなら、画像投稿が４レスに１回30KB前後有るとして7.5MB、サムネールや文字投稿を含め1スレッド10MBくらいを目安として考えると良いと思います。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>過去ログ倉庫スレッド数上限</b><br>
        　過去ログ倉庫への保存形式は投稿用のスレッドと同じです。ですから、過去ログ倉庫に移動したスレッドを投稿用ボードへ移動する事もできます。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　この数値で過去ログ倉庫のスレッド数を設定します。上限を超えた場合はスレッド一覧の１番下に有るスレッドを消去します。0にすると、過去ログ倉庫を作りませんので、投稿用ボードのスレッド数上限を超えた場合、スレッド一覧の１番下に有るスレッドが消去されます。マイナスに設定すると管理人が過去ログ倉庫に対して「スレッド消去」を実行しない限り過去ログ倉庫のスレッドが消える事は有りません。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>背景や板タイトルの画像パス</b><br>
        　トップページの背景やボードタイトル画像の有るディレクトリを指定します。デフォルトではダウンロード後に解凍してできたimagesディレクトリを指定していますが、画像ディレクトリ名を変更したい場合や、掲示板以外で使っている画像用ディレクトリを指定したい場合に変更します。<br>
        　http://で始まるパスは設定できません。また、投稿画像の保存される場所とは無関係です。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>掲示板一覧の有無</b><br>
        　複数のボードを作る場合は「有り」に設定し、１枚のボードで運用する場合は「無し」に設定します。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>ID生成等に使う20進数</b><br>
        　投稿者IDの出るボードで端末情報からIDを生成する時に使う20進数を定義します。<br>
        　IDは元旦からの経過日数を２桁の文字列にして、他の端末情報と一緒に暗号化関数に渡して生成しています。よって同じ端末からの投稿でも日付が変われば別のIDが生成されますが、年が違っても月日が同じなら同じIDが生成されます。１年に１度はこの並びを変更されるのをお奨めします。またIDから端末情報を逆算されない為に適度に変更するのも良いでしょう。この数値がバレてもIDからの端末情報逆算は困難とは思いますけど。<br>
        　設定できる文字は英大文字小文字と数字です。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>画像処理モジュール</b><br>
        　画像投稿や携帯用アスキーアートビューアーで使用する画像処理モジュールを選択します。「使わない」「Image::Magick」「GD::Image」が選択できます。<br>
        　サーバーによってどのモジュールが使えるのか分からない場合は、テスト用のボードを作成し書き込みをしてから、携帯用のアスキーアートビューアーを実行します。500エラーが出るならそのモジュールは使えませんので、まともに表示できる設定を探してください。<br>
        　作者の借りているサーバーではImage::Magickしか使えませんでした。GD::Imageはローカルサーバーでの動作テストしかしていませんので、アスキーアートビューアーが正常に動作するかどうか不安ではあります。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>文字+画像の投稿サイズ上限</b><br>
        　文字の投稿サイズの上限はボード単位で設定できますが、画像を含めた投稿サイズの上限はサーバー単位でしか設定できません。2000以下にすると文字投稿のみでも影響が出ます。画像の投稿サイズの上限に2000前後の数値を足した値を設定して下さい。<br>
        　ちなみに、gif、jpeg以外の画像が投稿された場合はjpegに変換して保存します。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>アスキーアートビューアー</b><br>
        　「使わない」と「AA」と「AAS」が選択できます。<br>
        　AASは外部サイトのアスキーアート変換サービスです。AAはこのスクリプト独自のアスキーアートビューアーです。画像処理モジュールを「使わない」に設定するとAASしか選択できません。<br>
        　レンタルサーバーの多くは重いcgiの実行を禁止しています。AAは重いような感じもしますが、アスキーアートの投稿が少ない掲示板なら問題無いような気もします。<br>
        　画質やサーバーの負荷なども考えて選択して下さい。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><b>AA用フォントファイルパス</b><br>
        　アスキーアートビューアーをAAにした場合のフォントファイルパスを記述します。インストールの項で説明したbbsディレクトリ以外の場所にIPAモナーフォントを置いている場合はこの設定を変更して下さい。<br>
        　アスキーアートビューアーを「使わない」や「AAS」に設定している場合は、この設定はどうでも良いです。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt">　ここまでの作業が終了したら、インストール作業は終わったような物です。ボード１枚で運用する場合は、ボードを作って動作テストや本番のボードを作っても構いません。が、ボードを作ったり消したりの試行錯誤をしたり、複数のボードを作りたい場合など、他の初期設定もしていた方が何かと便利です。<br>
        　複数サーバーで運用する場合や、動作テスト用のボードを秘密で作る場合はカテゴリ設定も必要です。<p style="line-height: 150%; margin-left: 20pt; margin-right: 5pt"><a href="init3.htm">初期設定続き</a>  
    </td>
  </tr>
  </table>
</div>

</body>

</html>
